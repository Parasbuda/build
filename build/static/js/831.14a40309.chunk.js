"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[831],{2557:function(e,n,r){r(72791);var t=r(16587),a=r(98158),s=r(80184);n.Z=function(e){var n=e.type,r=e.className,i=e.disabled,o=e.title,l=e.loading,c=e.content,u=e.color,d=e.onClick;return(0,s.jsx)(a.Z,{content:c,children:(0,s.jsx)("button",{onClick:d,type:n,className:r,disabled:i,children:l?(0,s.jsx)(t.Z,{color:u}):o})})}},25922:function(e,n,r){r.d(n,{od:function(){return t}});var t=[{id:1,name:"Male"},{id:2,name:"Female"}]},16587:function(e,n,r){r(72791);var t=r(32328),a=r(80184);n.Z=function(e){var n=e.color;return(0,a.jsx)("img",{src:t,alt:"spinner",color:n,height:"30px",className:"ml-4"})}},94924:function(e,n,r){r.d(n,{Z:function(){return a}});r(72791);var t=r(80184),a=function(e){return(0,t.jsx)("div",{className:"error",children:e.children})}},98158:function(e,n,r){r(72791);var t=r(81067),a=r(80184);n.Z=function(e){var n=e.content,r=e.children;return(0,a.jsx)(t.ZP,{content:n,children:r})}},61831:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(33032),a=r(23430),s=r(84322),i=r.n(s),o=r(72791),l=r(55705),c=r(56391),u=r(77849),d=r(94924),m=r(16030),p=r(91653),f=r(29801),h=r(87273),v=r(39126),x=r(25922),_=r(2557),b=r(79271),g=r(12667),j=r(89731),w=r(80184),y=function(e){var n=e.currentPage,r=e.loading,s=(0,b.k6)(),y=((0,m.v9)((function(e){return e.auth.permissions})),(0,m.v9)((function(e){return e.auth.is_superuser})),(0,m.v9)((function(e){return e.user.user}))),N=(0,m.v9)((function(e){return e.user.edit})),Z=(0,o.useState)(null),k=(0,a.Z)(Z,2),F=k[0],C=k[1],A=(0,m.I0)(),U=(0,o.useState)("password"),P=(0,a.Z)(U,2),S=P[0],E=P[1],M=(0,o.useState)("password"),q=(0,a.Z)(M,2),R=q[0],O=q[1],B=(0,o.useState)(!1),L=(0,a.Z)(B,2),I=L[0],T=L[1],G=(0,o.useState)(null),V=(0,a.Z)(G,2),z=V[0],D=V[1],$={first_name:null!==z?z.first_name:N?null===y||void 0===y?void 0:y.first_name:"",middle_name:null!==z?z.middle_name:N?null===y||void 0===y?void 0:y.middle_name:"",last_name:null!==z?z.last_name:N?null===y||void 0===y?void 0:y.last_name:"",user_branch:null!==z?z.user_branch:N?null===y||void 0===y?void 0:y.user_branch:"",group:null!==z?z.group:N?null===y||void 0===y?void 0:y.group:"",email:null!==z?z.email:N?null===y||void 0===y?void 0:y.email:"",employee_id:null!==z?z.employee_id:N?null===y||void 0===y?void 0:y.employee_id:"",username:null!==z?z.username:N?null===y||void 0===y?void 0:y.username:"",gender:null!==z?z.gender:N?null===y||void 0===y?void 0:y.gender:"",password:null!==z?z.password:N?null===y||void 0===y?void 0:y.password:"",confirm_password:null!==z?z.confirm_password:N?null===y||void 0===y?void 0:y.confirm_password:"",is_active:null!==z?z.is_active:!N||(null===y||void 0===y?void 0:y.is_active)},J=c.Ry().shape({first_name:c.Z_().min(2,"First name must be at least 2 characters.").max(50,"First name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"First name should only contain alphabet."),middle_name:c.Z_().min(2,"Middle name must be at least 2 characters.").max(50,"Middle name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Middle name should only contain alphabet."),last_name:c.Z_().min(2,"Last name must be at least 2 characters.").max(50,"Last name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Last name should only contain alphabet."),email:c.Z_().email().required("Email is required."),username:c.Z_().required("Username is required.").min(4,"Username must be at least 4 characters.").max(50,"Username should be 50 characters.").matches(/(?=.*^[A-Za-z_]\w).*$/,"Username should begin with _ or alphabet."),password:c.Z_().required("Please Enter your password").min(6,"Password must be at least 6 characters.").matches(/^(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$/,"Must Contain 6 Characters, One alphabet and One Number "),confirm_password:c.Z_().required("Password is required.").oneOf([c.iH("password"),null],"Passwords must match."),user_branch:c.Ry().typeError("Branch is required").required("Branch is required"),group:c.Ry().typeError("Group is required").required("Group is required"),employee_id:c.Z_(),is_active:c.Xg(),gender:c.Ry().nullable(!0)}),X=function(){var e=(0,t.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||n.target.value===(null===y||void 0===y?void 0:y.username)){e.next=6;break}if(!n.target.value.trim()||""===n.target.value){e.next=6;break}return e.next=4,(0,h.k)(n);case 4:e.sent?(0,f.Mn)("User name with this  is already added. ")||T(!0):T(!1);case 6:if(!n.target.value.trim()||""===n.target.value){e.next=11;break}return e.next=9,(0,h.k)(n);case 9:e.sent?(0,f.Mn)("User with this name is already added ")||T(!0):T(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){E("password"===S?"text":"password")},K=function(){O("password"===R?"text":"password")},Q=function(){var e=(0,t.Z)(i().mark((function e(n,r,t){var a,s,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,s=t.offset,e.next=3,(0,j.Z)("/api/v1/core-app/branch?search=".concat(n,"&offset=").concat(s,"&limit=").concat(a));case 3:return o=e.sent,l=o.data,e.abrupt("return",{options:l.results,hasMore:l.count>a,additional:{offset:a,limit:a+10}});case 6:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),W=function(){var e=(0,t.Z)(i().mark((function e(n,r,t){var a,s,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,s=t.offset,e.next=3,(0,j.Z)("/api/v1/group-app/group?search=".concat(n,"&offset=").concat(s,"&limit=").concat(a));case 3:return o=e.sent,l=o.data,e.abrupt("return",{options:l.results,hasMore:l.count>a,additional:{offset:a,limit:a+10}});case 6:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"row justify-content-center mt-3",children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)("div",{className:"registration-process ",children:(0,w.jsx)(l.J9,{enableReinitialize:!0,initialValues:$,validationSchema:J,onSubmit:function(e){var r=e.first_name,t=e.middle_name,a=e.last_name,i=e.email,o=e.username,l=e.is_active,c=e.employee_id,u=e.user_branch,d=e.gender,m=e.group,f=e.password,h=e.confirm_password,v=(null===r||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===r||void 0===r?void 0:r.slice(1)),x=(null===t||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===t||void 0===t?void 0:t.slice(1)),_=(null===a||void 0===a?void 0:a.charAt(0).toUpperCase())+(null===a||void 0===a?void 0:a.slice(1)),b=null===o||void 0===o?void 0:o.toLowerCase();T(!0),A((0,p.r4)({first_name:v,middle_name:x,last_name:_,email:i,username:b,gender:d,employee_id:c,user_branch:null===u||void 0===u?void 0:u.id,group:null===m||void 0===m?void 0:m.id,is_active:l,password:f,confirm_password:h,history:s},n)),T(!1),D(null)},children:function(e){return(0,w.jsxs)(l.l0,{autoComplete:"off",children:[(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"first_name",className:"fw-bold float-start",children:"First Name"}),(0,w.jsx)(l.gN,{type:"text",name:"first_name",className:"form-control ",placeholder:"First Name"}),(0,w.jsx)(l.Bc,{name:"first_name",component:d.Z})]}),(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"middle_name",className:"fw-bold float-start",children:"Middle Name"}),(0,w.jsx)(l.gN,{type:"text",name:"middle_name",className:"form-control ",placeholder:"Middle Name"}),(0,w.jsx)(l.Bc,{name:"middle_name",component:d.Z})]}),(0,w.jsxs)("div",{className:" col-4",children:[(0,w.jsx)("label",{htmlFor:"last_name",className:"fw-bold float-start",children:"Last Name"}),(0,w.jsx)(l.gN,{type:"text",name:"last_name",className:"form-control ",placeholder:"Last Name"}),(0,w.jsx)(l.Bc,{name:"last_name",component:d.Z})]})]}),(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:"col-3",children:[(0,w.jsxs)("label",{htmlFor:"username",className:"fw-bold float-start",children:["User Name (Case Insensitive)",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(l.gN,{type:"text",name:"username",className:"form-control ",placeholder:"Username",onChange:function(n){var r=(n.target.value||"").replace(/\s+/gi,"");e.setFieldValue("username",r.trim()),X(n)},autoFocus:!0}),(0,w.jsx)(l.Bc,{name:"username",component:d.Z})]}),(0,w.jsxs)("div",{className:" col-3",children:[(0,w.jsxs)("label",{htmlFor:"email",className:"fw-bold float-start",children:["Email",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(l.gN,{type:"email",name:"email",className:"form-control ",placeholder:"Email"}),(0,w.jsx)(l.Bc,{name:"email",component:d.Z})]}),(0,w.jsxs)("div",{className:" col-3",children:[(0,w.jsxs)("label",{htmlFor:"employee_id",className:"fw-bold float-start",children:["Employee ID",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)(l.gN,{type:"text",name:"employee_id",className:"form-control ",placeholder:"Employee ID"}),(0,w.jsx)(l.Bc,{name:"employee_id",component:d.Z})]}),(0,w.jsxs)("div",{className:"col-3 ",children:[(0,w.jsxs)("label",{htmlFor:"user_branch",className:"fw-bold ",children:["Branch",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)(g.n9,{value:e.values.user_branch,isClearable:"true",isSearchable:"true",name:"user_branch",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(n){e.setFieldValue("user_branch",n)},loadOptions:Q,additional:{offset:0,limit:10}})})}),(0,w.jsx)("div",{children:(0,w.jsx)(l.Bc,{name:"user_branch",component:d.Z})})]})]}),(0,w.jsx)("div",{className:"form-group row mb-2 justify-content-center"}),(0,w.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,w.jsxs)("div",{className:"col-3 password-field",children:[(0,w.jsxs)("label",{htmlFor:"password",className:"fw-bold float-start",children:["Password",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)(l.gN,{type:S,name:"password",className:"form-control",placeholder:"Password"}),(0,w.jsx)("span",{onClick:H,children:"password"===S?(0,w.jsx)(v.cqT,{}):(0,w.jsx)(v.rnh,{})})]}),(0,w.jsx)(l.Bc,{name:"password",component:d.Z})]}),(0,w.jsxs)("div",{className:"col-3 password-field",children:[(0,w.jsxs)("label",{htmlFor:"confirm_password",className:"fw-bold float-start",children:["Confirm Password",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)(l.gN,{type:R,name:"confirm_password",className:"form-control",placeholder:"Confirm Password"}),(0,w.jsx)("span",{onClick:K,children:"password"===R?(0,w.jsx)(v.cqT,{}):(0,w.jsx)(v.rnh,{})})]}),(0,w.jsx)(l.Bc,{name:"confirm_password",component:d.Z})]}),(0,w.jsxs)("div",{className:"col-3 ",children:[(0,w.jsxs)("label",{htmlFor:"group",className:"fw-bold ",children:["Group",(0,w.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)(g.n9,{value:e.values.group,isClearable:"true",isSearchable:"true",name:"group",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(n){e.setFieldValue("group",n)},loadOptions:W,additional:{offset:0,limit:10}})})}),(0,w.jsx)("div",{children:(0,w.jsx)(l.Bc,{name:"group",component:d.Z})})]}),(0,w.jsxs)("div",{className:"col-3",children:[(0,w.jsx)("label",{htmlFor:"gender",className:"fw-bold ",children:"Gender"}),(0,w.jsx)(u.ZP,{value:F,isClearable:"true",isSearchable:"true",name:"gender",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},options:x.od,onChange:function(n){e.setFieldValue("gender",null===n||void 0===n?void 0:n.id),C(n)}}),(0,w.jsx)(l.Bc,{name:"gender",component:d.Z})]})]}),(0,w.jsx)("div",{className:"form-group row mb-2",children:(0,w.jsxs)("div",{className:"col-12 text-center",children:[(0,w.jsx)(l.gN,{type:"checkbox",name:"is_active",id:"is_active",className:"filled-in chk-col-blue"}),(0,w.jsxs)("label",{htmlFor:"is_active",className:"fw-bold  mx-2",children:[" ","Active"]})]})}),(0,w.jsx)("div",{className:"form-group text-center",children:(0,w.jsx)(_.Z,{type:"btn",className:"btn btn-primary",loading:r,disabled:I||!e.dirty,title:"Create",content:"Add"})})]})}})})})})})},N=o.memo(y)},79814:function(e,n,r){r.d(n,{Nq:function(){return c},PR:function(){return a},Rv:function(){return o},TI:function(){return s},hj:function(){return i},o1:function(){return u},pX:function(){return d},r4:function(){return l}});var t=r(89731),a=function(e){return t.Z.get("api/v1/user-app/user?offset=0&limit=".concat(e,"&ordering=-id"))},s=function(e){return t.Z.get(e)},i=function(e){return t.Z.get(e)},o=function(e,n){return t.Z.get("api/v1/user-app/user?offset=".concat((e-1)*n,"&limit=").concat(n,"&ordering=-id"))},l=function(e){return t.Z.post("api/v1/user-app/user",e)},c=function(e,n){return t.Z.patch("api/v1/user-app/update-user/".concat(e),n)},u=function(e,n){return t.Z.get("api/v1/user-app/user?offset=0&limit=".concat(n,"&search=").concat(e))},d=function(e,n){return t.Z.get("api/v1/user-app/user?username=".concat(e.target.value.trim()),{cancelToken:n.token})}},91653:function(e,n,r){r.d(n,{r4:function(){return b},hj:function(){return x},Rv:function(){return _},TI:function(){return v},PR:function(){return h},o1:function(){return j},Nq:function(){return g}});var t=r(18489),a=r(33032),s=r(84322),i=r.n(s),o=r(79814),l=r(88038),c=function(){return{type:l.A.LOADING_USER}},u=function(){return{type:l.A.LOADING_UPDATED}},d=function(e){return{type:l.A.GET_USER_SUCCESS,payload:e}},m=function(e){return{type:l.A.GET_USER_FAIL,payload:e}},p=function(e){return{type:l.A.UPDATE_USER_FAIL,payload:e}},f=r(29801),h=(r(30456),function(e){return function(){var n=(0,a.Z)(i().mark((function n(r){var a,s,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(c()),n.next=4,o.PR(e);case 4:a=n.sent,s=a.data,l=s.results.filter((function(e){return!1===e.is_superuser})),r(d((0,t.Z)((0,t.Z)({},s),{},{results:l}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),r(m(n.t0)),(0,f.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}),v=function(e){return function(){var n=(0,a.Z)(i().mark((function n(r){var a,s,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(c()),n.next=4,o.TI(e);case 4:a=n.sent,s=a.data,l=s.results.filter((function(e){return!1===e.is_superuser})),r(d((0,t.Z)((0,t.Z)({},s),{},{results:l}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),r(m(n.t0)),(0,f.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var n=(0,a.Z)(i().mark((function n(r){var a,s,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(c()),n.next=4,o.hj(e);case 4:a=n.sent,s=a.data,l=s.results.filter((function(e){return!1===e.is_superuser})),r(d((0,t.Z)((0,t.Z)({},s),{},{results:l}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),r(m(n.t0)),(0,f.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},_=function(e){var n=e.number,r=e.postsPerPage;return function(){var e=(0,a.Z)(i().mark((function e(t){var a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(c()),e.next=4,o.Rv(n,r);case 4:a=e.sent,s=a.data,t(d(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t(m(e.t0)),(0,f.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()},b=function(e,n){var r=e.first_name,t=e.middle_name,s=e.last_name,u=e.email,d=e.username,m=e.employee_id,p=e.is_active,h=e.user_branch,v=e.group,x=e.gender,b=e.password,g=e.confirm_password,j=e.history;return function(){var e=(0,a.Z)(i().mark((function e(a){var w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w=JSON.stringify({first_name:r,middle_name:t,last_name:s,email:u,username:d,employee_id:m,group:v,is_active:p,user_branch:h,gender:x,password:b,confirm_password:g}),a(c()),e.next=5,o.r4(w);case 5:(0,f.My)("User created successfully "),a(_({number:n,postsPerPage:10})),j.push("/user"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a((i=e.t0,{type:l.A.CREATE_USER_FAIL,payload:i})),(0,f.Mn)("Failed to create user.");case 14:case"end":return e.stop()}var i}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()},g=function(e,n,r){return function(){var t=(0,a.Z)(i().mark((function t(a){var s,l,c,d,m,h,v,x,b,g,j,w,y;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.first_name,l=n.middle_name,c=n.last_name,d=n.email,m=n.username,h=n.employee_id,v=n.user_branch,x=n.group,b=n.gender,g=n.is_active,j=n.remarks,t.prev=1,a(u()),w=JSON.stringify({first_name:s,middle_name:l,last_name:c,email:d,username:m,employee_id:h,user_branch:v,group:x,gender:b,is_active:g,remarks:j}),t.next=6,o.Nq(e,w);case 6:y=t.sent,y.data,a(_({number:1,postsPerPage:10})),(0,f.My)("User Updated Successfully "),r.push("/user"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),a(p(t.t0)),(0,f.Mn)("Failed to Update User");case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e,n){return function(){var r=(0,a.Z)(i().mark((function r(t){var a,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(c()),r.next=4,o.o1(e,n);case 4:a=r.sent,s=a.data,t(d(s)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),t(m(r.t0)),(0,f.Mn)(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}},87273:function(e,n,r){r.d(n,{k:function(){return u}});var t,a=r(33032),s=r(84322),i=r.n(s),o=r(74569),l=r.n(o),c=r(79814),u=function(){var e=(0,a.Z)(i().mark((function e(n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==typeof t&&t.cancel("Operation canceled due to new request."),t=l().CancelToken.source(),e.prev=2,e.next=5,(0,c.pX)(n,t);case 5:if(r=e.sent,!((a=r.data).length>0)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(a.length<=0)){e.next=11;break}return e.abrupt("return",!1);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(2);case 15:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(n){return e.apply(this,arguments)}}()},32328:function(e,n,r){e.exports=r.p+"static/media/spinner.9012f56ae4662e1be3c6.gif"}}]);
//# sourceMappingURL=831.14a40309.chunk.js.map